:root {
  --bg: #1f1f23;
  --panel: #2a2b31;
  --panel-2: #32333b;
  --text: #e8e8ea;
  --muted: #a9acb5;
  --accent: #4d8dff;
  --line: #444752;
}
@media (prefers-color-scheme: light) {
  :root {
    --bg: #f3f4f7;
    --panel: #ffffff;
    --panel-2: #f6f7fb;
    --text: #1f2230;
    --muted: #535c70;
    --accent: #2b6df6;
    --line: #d6d9e2;
  }
}
body { margin: 0; background: var(--bg); color: var(--text); font-family: Inter, system-ui, sans-serif; font-size: 12px; }
#top_menubar { height: 40px; background: var(--panel); border-bottom: 1px solid var(--line); display:flex; align-items:center; padding:0 14px; }
.menu-trigger,.menu-item,.button,.tool-btn { background: var(--panel-2); border: 1px solid var(--line); color: var(--text); border-radius: 6px; }
.menu-trigger { padding: 6px 12px; cursor:pointer; }
#file_menu_wrap { position: relative; }
.popup-menu { position:absolute; top:36px; left:0; width:220px; background: var(--panel); border:1px solid var(--line); border-radius:10px; padding:6px; z-index:20; }
.popup-menu.hidden,.modal.hidden { display:none; }
.menu-item { display:flex; justify-content:space-between; width:100%; box-sizing:border-box; padding:8px 10px; margin:2px 0; cursor:pointer; text-align:left; }
.menu-item input { display:none; }
.popup-menu hr, .tool-palette hr { border:0; border-top:1px solid var(--line); margin:6px 2px; }
.has-submenu { position:relative; }
.submenu { display:none; position:absolute; left:100%; top:0; width:220px; background:var(--panel); border:1px solid var(--line); border-radius:10px; padding:8px; }
.has-submenu:hover .submenu { display:block; }
#fe_scene { width:100%; background:transparent; color:var(--text); border:1px solid var(--line); padding:6px; }
#container { display:flex; gap:18px; padding:18px; align-items:flex-start; }
#d_options { width:352px; }
#palette_display { width:350px; }
div.palette_color { float:left; width:20px; height:20px; border:1px solid var(--line); margin:1px 0 0 1px; cursor:move; }
div.palette_color.selected { border-color: var(--accent); }
.clear { clear:both; }
#mycanvas { border:1px solid var(--line); background:#000; image-rendering: pixelated; }
#d_canvas_row { position:relative; }
#d_loading { position:absolute; width:32px; height:32px; border:2px solid var(--line); border-top-color: var(--accent); border-radius:50%; animation: ccspin .8s linear infinite; }
#d_cycles_row { background: var(--panel); border:1px solid var(--line); border-radius: 10px; padding:10px; margin-top:10px; width:640px; }
.label { font-weight:700; color:var(--muted); margin-bottom:6px; }
.button { padding:6px 10px; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; gap:6px; }
.button.selected,.tool-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }
#cycles_editor { max-height:240px; overflow:auto; }
.cycle_header,.cycle_row { display:grid; grid-template-columns:2rem 4.5rem 4.5rem 4.5rem 4.5rem 4.5rem auto; column-gap: .8rem; align-items:center; }
.cycle_row input,.cycle_row select { width:100%; box-sizing:border-box; background:var(--panel-2); border:1px solid var(--line); color:var(--text); }
.tool-palette { position:fixed; right:18px; background:var(--panel); border:1px solid var(--line); border-radius:12px; padding:10px; display:flex; flex-direction:column; gap:8px; z-index:10; }
#cycle_palette { top:64px; width:170px; }
#image_palette { top:290px; width:56px; align-items:center; }
.palette-title { font-size:11px; color:var(--muted); font-weight:700; text-transform:uppercase; }
.speed-row { display:grid; grid-template-columns: repeat(5, 1fr); gap:4px; }
.blend-toggle { display:flex; align-items:center; gap:8px; }
.blend-icon { width:14px; height:14px; border-radius:4px; background: linear-gradient(135deg,#ff7b7b,#ffd86f,#7be0ff); border:1px solid var(--line); }
.tool-btn { width:36px; height:36px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
.tool-chip { width:36px; height:36px; border:1px solid var(--line); border-radius:8px; background:#000; }
.modal { position:fixed; inset:0; background:rgba(0,0,0,.55); display:grid; place-items:center; z-index:30; }
.modal-card { width:380px; background:var(--panel); border:1px solid var(--line); border-radius:12px; padding:16px; }
.modal-actions { display:flex; justify-content:flex-end; gap:8px; }
@keyframes ccspin { from{transform:rotate(0)} to{transform:rotate(360deg)} }
